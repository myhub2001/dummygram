import{j as c,a as r,L as S,f as U,r as d,c as L,u as R,b as x,m as A,d as l}from"./index-19c586dc.js";const C="/assets/lock-be2fc807.png",E=({name:a})=>c("div",{className:"lock_profile_container",children:[r("img",{src:C,alt:"User Profile Locked",className:"profile_lock_img"}),c("h3",{children:["Add ",r(S,{to:`/user/${a}`,children:a})," as friend to unlock their friend list!"]})]}),P=()=>{var m,h;const{username:a}=U(),[f,g]=d.useState([]),[p,k]=d.useState("user"),[N,F]=d.useState(!0),o=(h=(m=L)==null?void 0:m.currentUser)==null?void 0:h.uid,u=R(),{enqueueSnackbar:b}=x(),v=async t=>{try{const n=await l.collection("users").doc(t).get();return n.exists?n.data():null}catch(s){return console.error("Error fetching doc: ",s),null}};async function w(){return(await l.collection("users").doc(o).get()).data().username===a}return d.useEffect(()=>{async function t(){let s;w?s=l.collection("users").where("username","==",a).limit(1):s=l.collection("users").where("username","==",a).where("Friends","array-contains",o).limit(1);const n=await s.get().catch(e=>{b(`Error getting friends: ${e}`,{variant:"error"})});if(n.empty)F(!1);else{const e=n.docs[0].data(),i=[];k(e.name);for(const y of(e==null?void 0:e.Friends)||(e==null?void 0:e.friends)||[]){const _=await v(y);_&&i.push({..._})}g(i)}}o&&t()},[o]),r("div",{className:"friends_page_main_container",children:N?c("div",{className:"friends_page_sub_container",children:[c("h1",{className:"friend_page_header",children:[p,"'s Friend List"]}),r("ul",{className:"friend_page_friend_list_container",children:f.length>0&&f.map(t=>{const{displayName:s,photoURL:n,bio:e,username:i}=t;return c("li",{className:"friend_page_friend_list_item",children:[r("img",{src:n||A,alt:"user pic",className:"friend_page_friend_avatar",onClick:()=>u(`/user/${i}`)}),c("div",{children:[r("h3",{className:"friend_page_friend_name",onClick:()=>u(`/user/${i}`),children:s||"user"}),r("span",{className:"friend_page_friend_bio",children:e||"..."})]})]},i)})})]}):r(E,{name:a})})},j=()=>r("div",{children:r(P,{})});export{j as default};
